machine:
  environment:
    # Add composer global bin dir to path.
    PATH: $HOME/.composer/vendor/bin:$PATH
  php:
    version: 7.1.3

test:
  pre:
    # Install hirak.
    - composer global require "hirak/prestissimo:^0.3"

    # Install test reporter for codeclimate.
    - composer --no-interaction require codeclimate/php-test-reporter:dev-master

    # Run test coverage.
    - ./vendor/bin/phpunit --coverage-clover build/logs/clover.xml

    # Send test coverage to codeclimate.
    - ./vendor/bin/test-reporter
  override:
    - ./vendor/bin/phpunit --configuration phpunit.xml
